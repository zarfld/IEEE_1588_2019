<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>IEEE 1588-2019 PTP Library: IEEE 1588-2019 PTP Library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type="text/javascript">
window.MathJax = {
  options: {
    ignoreHtmlClass: 'tex2jax_ignore',
    processHtmlClass: 'tex2jax_process'
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">IEEE 1588-2019 PTP Library<span id="projectnumber">&#160;1.0.0-MVP</span>
   </div>
   <div id="projectbrief">Hardware-agnostic IEEE 1588-2019 PTPv2 implementation with deterministic design</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title"><a class="el" href="d0/d1c/namespaceIEEE.html" title="Top-level IEEE standards namespace.">IEEE</a> 1588-2019 PTP Library </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__2home_2runner_2work_2IEEE__1588__2019_2IEEE__1588__2019_2README"></a></p>
<h1><a class="anchor" id="autotoc_md0"></a>
IEEE 1588-2019 ‚Äì Precision Time Protocol (PTPv2) Core Library</h1>
<p><a href="https://standards.ieee.org/standard/1588-2019.html"><img src="https://img.shields.io/badge/IEEE-1588--2019-blue" alt="Standard" class="inline"/></a> ![Status](https://img.shields.io/badge/Status-Active%20Development-yellow) ![License](https://img.shields.io/badge/License-See%20Repository-lightgrey) ![Build](https://img.shields.io/badge/Build-CMake-informational) ![Tests](https://img.shields.io/badge/Quality-Traceability%20Enforced-success)</p>
<p>Hardware &amp; OS agnostic implementation of core <b><a class="el" href="d0/d1c/namespaceIEEE.html" title="Top-level IEEE standards namespace.">IEEE</a> 1588-2019 Precision Time Protocol (PTPv2)</b> logic: message formats, BMCA, dataset management, delay mechanisms, and deterministic clock servo primitives. This repository focuses on the pure protocol layer ‚Äì no vendor drivers, no OS calls ‚Äì enabling reuse across embedded, desktop, and data‚Äëcenter environments.</p>
<blockquote class="doxtable">
<p>&zwj;Implementation is based on understanding of <a class="el" href="d0/d1c/namespaceIEEE.html" title="Top-level IEEE standards namespace.">IEEE</a> 1588-2019. For authoritative requirements consult the official standard. Section numbers are referenced without reproducing copyrighted text. </p>
</blockquote>
<h2><a class="anchor" id="autotoc_md2"></a>
&lt;/blockquote&gt;</h2>
<h2><a class="anchor" id="autotoc_md3"></a>
Table of Contents</h2>
<ol type="1">
<li>Purpose &amp; Scope</li>
<li>Design Principles</li>
<li>Architecture Overview</li>
<li>Feature Summary</li>
<li>Repository Layout</li>
<li>Getting Started</li>
<li>Building</li>
<li>Usage Examples</li>
<li>Testing &amp; Traceability</li>
<li>Roadmap</li>
<li>Contributing</li>
<li>Compliance &amp; References</li>
<li>FAQ</li>
<li>License</li>
<li>Last Updated</li>
</ol>
<hr  />
<h2><a class="anchor" id="autotoc_md5"></a>
Purpose &amp; Scope</h2>
<p>Provide a clean, testable, specification-aligned PTPv2 (<a class="el" href="d0/d1c/namespaceIEEE.html" title="Top-level IEEE standards namespace.">IEEE</a> 1588-2019) protocol core suitable for integration into higher-level timing stacks (e.g., <a class="el" href="d0/d1c/namespaceIEEE.html" title="Top-level IEEE standards namespace.">IEEE</a> 802.1AS/gPTP, AVTP time stamping, AVDECC timestamp validation, telecom profiles, Milan). The scope intentionally excludes:</p>
<ul>
<li>Hardware timestamp acquisition APIs (supplied via injected interfaces)</li>
<li>Network socket / driver code</li>
<li>Platform-specific time discipline implementation</li>
</ul>
<p>These belong in service / adaptation layers that depend on this library.</p>
<h2><a class="anchor" id="autotoc_md6"></a>
Design Principles</h2>
<ul>
<li>Standards Alignment: Data sets &amp; state machines mirror specification concepts (Sections 8, 9, 11, 13) without copying text.</li>
<li>Determinism: No dynamic allocation, no blocking waits in protocol paths; bounded loops; constant or amortized O(1) operations for hot paths.</li>
<li>Clean Layering: Higher standards (802.1AS, 1722, 1722.1) consume this library; no reverse dependencies.</li>
<li>Test-Driven: All externally observable behaviors have corresponding unit or scenario tests with requirement IDs (STR-*).</li>
<li>Traceability: Stakeholder requirements ‚Üí functional requirements ‚Üí tests ‚Üí evidence documented in <code>VERIFICATION_EVIDENCE.md</code>.</li>
<li>Portability: Pure C++ (standard library only) for logic; all environment specifics abstracted.</li>
</ul>
<h2><a class="anchor" id="autotoc_md7"></a>
Architecture Overview</h2>
<div class="fragment"><div class="line">Application / Control (e.g., AVDECC, Management UI)</div>
<div class="line">  ‚Üë</div>
<div class="line">Higher Timing Profiles (802.1AS, Telecom G.8275.x)</div>
<div class="line">  ‚Üë</div>
<div class="line">PTP Core (This Library)</div>
<div class="line">  ‚Ä¢ BMCA (Sec 9.3)</div>
<div class="line">  ‚Ä¢ Message Handling (Sec 13)</div>
<div class="line">  ‚Ä¢ Delay Mechanisms (Sec 11.3 / 11.4)</div>
<div class="line">  ‚Ä¢ Datasets (Sec 8)</div>
<div class="line">  ‚Ä¢ Servo &amp; Correction Field Processing</div>
<div class="line">  ‚Üë</div>
<div class="line">Injected Interfaces (time, timestamp capture, transport send/receive)</div>
<div class="line">  ‚Üë</div>
<div class="line">Hardware / OS Adapters (out of scope here)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md8"></a>
Feature Summary</h2>
<p>Implemented / In Progress (granular tracking maintained via tests &amp; roadmap):</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Area   </th><th class="markdownTableHeadNone">Status   </th><th class="markdownTableHeadNone">Notes    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Core data types (clockIdentity, portIdentity, timestamps)   </td><td class="markdownTableBodyNone">‚úÖ   </td><td class="markdownTableBodyNone">Section 7 &amp; 13 field sizing respected    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Basic message header parsing / serialization scaffolding   </td><td class="markdownTableBodyNone">‚úÖ   </td><td class="markdownTableBodyNone">Header validation + length checks    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">BMCA comparison primitives   </td><td class="markdownTableBodyNone">‚úÖ   </td><td class="markdownTableBodyNone">Dataset-based attribute comparison rules (Sec 9.3)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Servo simulation tests   </td><td class="markdownTableBodyNone">‚úÖ   </td><td class="markdownTableBodyNone">Deterministic convergence evidence (adaptive loop)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Requirement traceability tooling   </td><td class="markdownTableBodyNone">‚úÖ   </td><td class="markdownTableBodyNone">Python scripts enforce ‚â•75% covered STRs    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Multi-instance synchronization acceptance test   </td><td class="markdownTableBodyNone">‚úÖ   </td><td class="markdownTableBodyNone">Verifies isolation &amp; BMCA selection    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Management TLV framework   </td><td class="markdownTableBodyNone">üîÑ   </td><td class="markdownTableBodyNone">Structural placeholders, logic pending    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Peer &amp; end-to-end delay algorithms   </td><td class="markdownTableBodyNone">üîÑ   </td><td class="markdownTableBodyNone">Abstraction points defined    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Full state machine coverage (all states &amp; transitions)   </td><td class="markdownTableBodyNone">üîÑ   </td><td class="markdownTableBodyNone">Iterative expansion planned    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Security extensions (Annex / optional)   </td><td class="markdownTableBodyNone">‚è≥   </td><td class="markdownTableBodyNone">Deferred until core stability   </td></tr>
</table>
<p>Legend: ‚úÖ complete | üîÑ partial/in progress | ‚è≥ planned</p>
<h2><a class="anchor" id="autotoc_md9"></a>
Repository Layout</h2>
<p>High-level (non-exhaustive) structure for lifecycle compliance:</p>
<div class="fragment"><div class="line">01-stakeholder-requirements/   # Stakeholder context &amp; need statements (29148)</div>
<div class="line">02-requirements/               # System &amp; functional requirements specs</div>
<div class="line">03-architecture/               # Architecture description &amp; decisions (42010)</div>
<div class="line">04-design/                     # Detailed design (IEEE 1016)</div>
<div class="line">05-implementation/             # Source, tests, docs for implementation phase</div>
<div class="line">07-verification-validation/    # Test plans, cases, results (IEEE 1012)</div>
<div class="line">spec-kit-templates/            # Front matter schemas &amp; spec templates</div>
<div class="line">VERIFICATION_EVIDENCE.md       # Consolidated compliance &amp; coverage evidence</div>
</div><!-- fragment --><p>Core protocol source currently resides under <code>src/</code> &amp; <code>include/</code> while standards-specific re‚Äëstructuring towards <code>lib/Standards/IEEE/1588/2019/</code> is progressing (see Roadmap task).</p>
<h2><a class="anchor" id="autotoc_md10"></a>
Getting Started</h2>
<p>Minimal build workflow (Windows PowerShell &amp; generic cross‚Äëplatform). All build artefacts stay inside <code>build/</code>.</p>
<h3><a class="anchor" id="autotoc_md11"></a>
Prerequisites</h3>
<ul>
<li>CMake ‚â• 3.20</li>
<li>C++ compiler (MSVC 2019+/Clang/GCC supporting C++17 subset used)</li>
<li>Python 3 (traceability + coverage scripts)</li>
</ul>
<h3><a class="anchor" id="autotoc_md12"></a>
Quick Start</h3>
<ol type="1">
<li>Configure: <code>cmake -S . -B build -DCMAKE_BUILD_TYPE=Release</code></li>
<li>Build: <code>cmake --build build --config Release --target all</code></li>
<li>Run tests: <code>ctest --test-dir build -C Release --output-on-failure</code></li>
<li>Generate traceability &amp; coverage evidence (inside build): <code>py -3 scripts/generate-traceability-report.py</code></li>
</ol>
<blockquote class="doxtable">
<p>&zwj;Windows Visual Studio users may open the generated solution in <code>build/</code> directly. </p>
</blockquote>
<h2><a class="anchor" id="autotoc_md13"></a>
Building</h2>
<p>Key CMake options (add with <code>-D</code>):</p>
<ul>
<li><code>BUILD_TESTING=ON</code> (default) ‚Äì enable tests &amp; traceability gates.</li>
<li><code>PTP_ENABLE_SECURITY=ON</code> ‚Äì (future) include optional security extensions.</li>
<li><code>PTP_STRICT_COVERAGE=ON</code> ‚Äì fail build if coverage threshold unmet (future integration).</li>
</ul>
<p>Artifacts:</p>
<ul>
<li>Static library target (planned naming): <code>ieee1588_2019_ptp</code></li>
<li>Example executables under <code>build/examples/</code> (basic, realtime, time_sensitive)</li>
</ul>
<h2><a class="anchor" id="autotoc_md14"></a>
Usage Examples</h2>
<p>Illustrative (simplified) snippet ‚Äì actual APIs evolve with design specs.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;ieee1588/ptp/ptp_core.hpp&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="d8/d6f/namespaceIEEE_1_1__1588_1_1__2019.html">IEEE::_1588::_2019</a>; <span class="comment">// Planned namespace alignment</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Injected interfaces (user-supplied implementations)</span></div>
<div class="line"><span class="keyword">struct </span>NetIf { int (*send)(<span class="keyword">const</span> <span class="keywordtype">void</span>*, size_t); };</div>
<div class="line"><span class="keyword">struct </span>TimeIf { uint64_t (*now_ns)(); };</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> example(NetIf net, TimeIf timeSrc) {</div>
<div class="line">    BmcaCandidate local{};               <span class="comment">// Populate defaultDS attributes</span></div>
<div class="line">    BmcaCandidate foreign{};             <span class="comment">// From received Announce</span></div>
<div class="line">    <span class="keyword">auto</span> result = compare_bmca(local, foreign); <span class="comment">// BMCA attribute comparison</span></div>
<div class="line">    (void)result;</div>
<div class="line">}</div>
<div class="ttc" id="anamespaceIEEE_1_1__1588_1_1__2019_html"><div class="ttname"><a href="d8/d6f/namespaceIEEE_1_1__1588_1_1__2019.html">IEEE::_1588::_2019</a></div><div class="ttdef"><b>Definition</b> <a href="d9/dbe/profile_8hpp_source.html#l00029">profile.hpp:29</a></div></div>
</div><!-- fragment --><blockquote class="doxtable">
<p>&zwj;See <code>examples/</code> for complete, compilable demonstrations (multi‚Äëinstance sync, servo convergence, deterministic timing). </p>
</blockquote>
<h2><a class="anchor" id="autotoc_md15"></a>
Testing &amp; Traceability</h2>
<ul>
<li>Tests live under <code>05-implementation/tests/</code> &amp; root <code>tests/</code> (transition to unified location planned).</li>
<li>Requirement tags: <code>// @satisfies STR-ID</code> inside tests ‚Äì parsed by Python tooling.</li>
<li>Coverage Gate: Scripts enforce a minimum STR coverage threshold (currently 75%).</li>
<li>Acceptance Tests: Multi-instance BMCA, resource efficiency (no unintended heap allocs), servo convergence stability.</li>
<li>Evidence: Consolidated in <code>VERIFICATION_EVIDENCE.md</code> with links to raw logs.</li>
</ul>
<h2><a class="anchor" id="autotoc_md16"></a>
Roadmap</h2>
<p>Short to mid-term milestones:</p>
<ol type="1">
<li>Namespace &amp; directory migration to <code>lib/Standards/IEEE/1588/2019/</code> (structural compliance).</li>
<li>Complete message format parsing &amp; serialization (all mandatory types + TLV base).</li>
<li>Full state machine implementation (Section 9.2) with exhaustive transition tests.</li>
<li>Delay mechanisms (end‚Äëto‚Äëend &amp; peer) including correctionField accumulation.</li>
<li>Management messages (Section 15) ‚Äì get/set dataset operations.</li>
<li>Servo refinement: integrate adaptive PI loop with bounded convergence criteria.</li>
<li>Optional security extensions &amp; profile hooks (deferred until core stabilized).</li>
<li>Continuous performance benchmarks (deterministic latency / jitter evidence).</li>
</ol>
<h2><a class="anchor" id="autotoc_md17"></a>
Contributing</h2>
<ol type="1">
<li>Discuss significant changes via an issue (reference requirement IDs if applicable).</li>
<li>Follow TDD: add a failing test first (with <code>@satisfies</code> tag) before implementation.</li>
<li>Reference <a class="el" href="d0/d1c/namespaceIEEE.html" title="Top-level IEEE standards namespace.">IEEE</a> 1588-2019 Section numbers in comments (no copied text).</li>
<li>Keep commits minimal &amp; logically isolated; maintain passing tests.</li>
<li>Update traceability &amp; evidence docs if you add or fulfill requirements.</li>
</ol>
<h2><a class="anchor" id="autotoc_md18"></a>
Compliance &amp; References</h2>
<p>Referenced standards (no reproduction):</p>
<ul>
<li><a class="el" href="d0/d1c/namespaceIEEE.html" title="Top-level IEEE standards namespace.">IEEE</a> 1588-2019 (core PTP) ‚Äì Sections 7, 8, 9, 11, 13, 15 referenced in code/comments.</li>
<li>Related higher-layer standards (consumers): <a class="el" href="d0/d1c/namespaceIEEE.html" title="Top-level IEEE standards namespace.">IEEE</a> 802.1AS-2021, <a class="el" href="d0/d1c/namespaceIEEE.html" title="Top-level IEEE standards namespace.">IEEE</a> 1722-2016, <a class="el" href="d0/d1c/namespaceIEEE.html" title="Top-level IEEE standards namespace.">IEEE</a> 1722.1-2021.</li>
</ul>
<p>Traceability Matrix &amp; Evidence: See <code>VERIFICATION_EVIDENCE.md</code> &amp; <code>07-verification-validation/</code>.</p>
<h2><a class="anchor" id="autotoc_md19"></a>
FAQ</h2>
<p><b>Q: Where is hardware timestamping implemented?</b> In adaptation layers outside this repo; this core only defines interfaces.</p>
<p><b>Q: Why no OS/network code?</b> To keep protocol logic portable &amp; testable (CI-friendly, deterministic unit tests).</p>
<p><b>Q: How do I add a new requirement?</b> Create/update a spec in <code>02-requirements/</code>, include YAML front matter (schema validated), then add tagged tests.</p>
<p><b>Q: Why do tests fail after editing docs?</b> Some tests search for anchor phrases (e.g., "Getting Started"). Ensure they remain.</p>
<h2><a class="anchor" id="autotoc_md20"></a>
License</h2>
<p>See repository license file. Implementation is original; all <a class="el" href="d0/d1c/namespaceIEEE.html" title="Top-level IEEE standards namespace.">IEEE</a> specifications retain their respective copyrights. No specification text included.</p>
<h2><a class="anchor" id="autotoc_md21"></a>
Last Updated</h2>
<p>2025-11-09 (README restructuring: conflict markers removed, standardized sections added.)</p>
<hr  />
<blockquote class="doxtable">
<p>&zwj;Historical detailed implementation status blocks &amp; legacy conflict markers were removed for clarity. Prior granular status has been superseded by the concise Roadmap + Feature Summary above. </p>
</blockquote>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
