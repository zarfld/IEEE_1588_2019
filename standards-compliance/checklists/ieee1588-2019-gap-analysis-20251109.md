# IEEE 1588-2019 Gap Analysis (Cross-check) — 2025-11-09

Status: Draft

Scope: Cross-check the repository against IEEE 1588-2019 to identify missing or partial features. Reference clause numbers only; no spec text reproduced.

## Summary of Newly Identified Gaps

| Gap ID | Area | Clause(s) | Current Evidence | Impact | Proposed CAP |
|---|---|---|---|---|---|
| GAP-SIGNAL-001 | Signaling message handling (parse/dispatch) | 13.12, 20.x | `MessageType::Signaling` enum exists; no handlers/tests | Negotiation and optional features cannot be exercised | CAP-20251109-04 |
| GAP-UNICAST-001 | Unicast message negotiation | 16.1 | No negotiation state/logic/tests found | Interop with unicast deployments blocked | CAP-20251109-06 |
| GAP-PATHTRACE-001 | Path Trace TLV handling | 16.2 | No path trace TLV processing in code/tests | Optional visibility diagnostics missing | Future CAP |
| GAP-ALTTS-001 | Alternate timescale support | 16.3 | No offset handling surfaced in code/tests | Optional timescale features missing | Future CAP |
| GAP-CMLD-001 | Common mean link delay service | 8.4, 16.6 | Not implemented | Optional accuracy improvements unavailable | Future CAP |
| GAP-SEC-001 | Integrated security (Authentication TLV) | 16.14 | Design mentions; no implementation/tests | Security-conscious deployments blocked | CAP-20251109-05 |
| GAP-PERF-001 | Performance monitoring metrics | Annex J | Not instrumented | Observability/validation reduced | Future CAP |

Notes:
- Management TLV framework (Secs 14/15) and Delay mechanisms (11.3/11.4) already tracked via CAP-20251109-01 and CAP-20251109-02.
- State machine coverage improvements tracked via CAP-20251109-03.

## Priority Recommendations (Next 2 sprints)

1) Implement minimal Signaling handling (parse + dispatch + safe no-op for unsupported TLVs)
   - Why: Unblocks optional feature negotiations; closes explicit checklist gap
   - Evidence to Add: Unit tests for decode/dispatch, compliance matrix update

2) Add Unicast negotiation (basic request/grant lifecycle)
   - Why: High interop value for unicast-only networks
   - Evidence to Add: Unit tests; acceptance test with 2 instances exercising unicast flow (abstract transport)

3) Stage Integrated Security (Authentication TLV) behind feature flag
   - Why: Security posture; optional but strategic; design already outlines hooks
   - Evidence to Add: Negative/positive auth tests; security policy configuration doc

## Acceptance Tests to Add (placeholders)

- TEST-SIGNAL-001: Signaling decode/dispatch table coverage (happy path + unknown TLV)
- TEST-UNICAST-001: Unicast negotiation state transitions (request→grant→active→timeout)
- TEST-SEC-001: Authentication TLV validation (accept valid MAC; reject invalid/missing)

## Traceability Updates Needed

| Artifact | Action |
|---|---|
| 02-requirements | Add functional requirements for Signaling, Unicast negotiation, Integrated Security |
| 04-design | Add component/interface designs for signaling dispatcher, unicast negotiation state, security hooks |
| 05-implementation/tests | Add failing tests, then implementations |
| Compliance Matrix | Link clause→test evidence once implemented |

## References (by clause number only)
- IEEE 1588-2019 Clauses: 8.4, 13.12, 16.1, 16.2, 16.3, 16.6, 16.14, Annex J

This analysis only references clause numbers and implementation intent. For requirements, consult the official IEEE 1588-2019 specification.
